<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åä¸‰ | å¿«æ·å¤åˆ¶</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background-color: #121212; color: #e0e0e0; padding: 20px; min-height: 100vh; position: relative; }
        .title { text-align: center; margin-bottom: 15px; font-size: 24px; color: #fff; }
        
        .category-bar { max-width: 1200px; margin: 0 auto 20px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .category-btn { padding: 6px 14px; background-color: #1e1e1e; border: 1px solid #333; border-radius: 4px; cursor: pointer; transition: all 0.2s; position: relative; user-select: none; }
        .category-btn.active { background-color: #2196F3; color: #fff; border-color: #2196F3; }
        .category-btn.editing { background-color: #ff9800; border-color: #ff9800; }
        .category-btn.dragging { opacity: 0.5; background-color: #ff9800; transform: scale(1.05); z-index: 10; }
        .category-btn.drag-over { border: 2px dashed #2196F3; background-color: #2a2a2a; }
        .add-category-btn { padding: 6px 14px; background-color: #333; border: 1px solid #444; border-radius: 4px; cursor: pointer; transition: background 0.2s; }
        .add-category-btn:hover { background-color: #444; }
        
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; max-width: 1400px; margin: 0 auto; padding-bottom: 80px; }
        .grid-item { background-color: #1e1e1e; border: 1px solid #333; border-radius: 4px; padding: 15px 10px; text-align: center; cursor: pointer; transition: all 0.2s; min-height: 60px; display: flex; align-items: center; justify-content: center; word-break: break-all; user-select: none; }
        .grid-item:hover { background-color: #2d2d2d; border-color: #555; }
        .grid-item.dragging { opacity: 0.5; background-color: #ff9800; transform: scale(1.05); z-index: 10; }
        .grid-item.drag-over { border: 2px dashed #2196F3; background-color: #2a2a2a; }
        
        .btn-group { position: fixed; bottom: 30px; right: 30px; display: flex; gap: 12px; }
        .func-btn { width: 50px; height: 50px; border-radius: 50%; border: none; color: #fff; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .add-grid-btn { background-color: #2196F3; }
        .add-grid-btn:hover { background-color: #1976D2; }
        .save-file-btn { background-color: #4CAF50; }
        .save-file-btn:hover { background-color: #388E3C; }
        
        .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 8px 16px; border-radius: 4px; font-size: 14px; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .copy-toast { background-color: #32cd32; color: #fff; }
        .save-toast { background-color: #ff9800; color: #fff; }
        .toast.show { opacity: 1; }
        
        .grid-item::-webkit-context-menu { display: none; }
        
        /* åˆ†ç±»ç¼–è¾‘è¾“å…¥æ¡†æ ·å¼ */
        .category-input { 
            background: transparent; 
            border: none; 
            color: inherit; 
            font-size: inherit; 
            text-align: center; 
            outline: none; 
            width: 100%; 
            padding: 0;
        }
        
        /* å³é”®èœå•æ ·å¼ */
        .context-menu {
            position: fixed;
            background: #2d2d2d;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 8px 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            min-width: 120px;
        }
        
        .context-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .context-menu-item:hover {
            background: #2196F3;
        }
        
        .context-menu-item.delete {
            color: #ff6b6b;
        }
        
        .context-menu-item.delete:hover {
            background: #ff6b6b;
            color: white;
        }
    </style>
<input type="hidden" id="_o_dbjbempljhcmhlfpfacalomonjpalpko" data-inspect-config="3"><script type="text/javascript" src="chrome-extension://odphnbhiddhdpoccbialllejaajemdio/scripts/inspector.js"></script></head>
<body>
    <h1 class="title">å¿«æ·å¤åˆ¶</h1>
    
    <div class="category-bar" id="categoryBar">
        <div class="category-btn" data-category="all">å…¨éƒ¨</div>
        <!-- åˆ†ç±»æŒ‰é’®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        <div class="category-btn" data-category="é»˜è®¤" draggable="true">é»˜è®¤</div><div class="category-btn" data-category="åˆ†ç±»2" draggable="true">åˆ†ç±»2</div><div class="category-btn" data-category="åˆ†ç±»3" draggable="true">åˆ†ç±»3</div><div class="category-btn" data-category="åˆ†ç±»4" draggable="true">åˆ†ç±»4</div><div class="category-btn active" data-category="çº¢çŸ³" draggable="true">çº¢çŸ³</div><div class="category-btn" data-category="æ™šå®‰" draggable="true">æ™šå®‰</div><div class="category-btn" data-category="ã¥â™¡ã©" draggable="true">ã¥â™¡ã©</div><button class="add-category-btn" id="addCategoryBtn">+</button>
    </div>
    
    <div class="grid-container" id="gridContainer"><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859680558_768" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ1æ—¥-äº‘é‡å±±æ´ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859691934_789" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ3æ—¥-åœ†æ¢¦æ‘ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859692414_810" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ5æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859692882_13" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ7æ—¥-é›¨æ—å®«æ®¿ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859693455_702" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ9æ—¥-æš—èŸ¹æ²™åŸğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859695864_670" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ11æ—¥-åœ£å²›ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859696464_565" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ13æ—¥-åœ†æ¢¦æ‘ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859696946_551" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ15æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859697417_313" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ17æ—¥-é›¨æ—é«˜å¤„ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859697985_104" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ19æ—¥-æš®åœŸå¢“å›­ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859699123_836" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ21æ—¥-æµ®çŸ³é¸Ÿå·¢ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859699694_835" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ23æ—¥-éšå£«å±±è°·ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859700587_425" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ25æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859701905_75" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ27æ—¥-å¤§æ ‘å±‹ğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859703975_386" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ29æ—¥-å¤±è½æ–¹èˆŸğŸ—“</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1762859705526_117" data-grid-category="çº¢çŸ³" draggable="true">ğŸ—“11æœˆ31æ—¥-äº‘é‡å±±æ´ğŸ—“</div></div>
    
    <div class="btn-group">
        <button class="func-btn add-grid-btn" id="addGridBtn">+</button>
        <button class="func-btn save-file-btn" id="saveFileBtn">ğŸ’¾</button>
    </div>
    
    <div class="toast copy-toast" id="copyToast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
    <div class="toast save-toast" id="saveToast">æ–‡ä»¶å·²å¼€å§‹ä¸‹è½½</div>

    <script>
        // DOMå…ƒç´ 
        const categoryBar = document.getElementById('categoryBar');
        const gridContainer = document.getElementById('gridContainer');
        const addCategoryBtn = document.getElementById('addCategoryBtn');
        const addGridBtn = document.getElementById('addGridBtn');
        const saveFileBtn = document.getElementById('saveFileBtn');
        const copyToast = document.getElementById('copyToast');
        const saveToast = document.getElementById('saveToast');

        // æ ¸å¿ƒæ•°æ® - åˆå§‹æ•°æ®
        let appData = {
  "grids": [
    {
      "id": "grid_1",
      "content": "ç¤ºä¾‹æ–‡æœ¬1",
      "category": "é»˜è®¤"
    },
    {
      "id": "grid_2",
      "content": "ç¤ºä¾‹æ–‡æœ¬2",
      "category": "é»˜è®¤"
    },
    {
      "id": "grid_1761837505336_633",
      "content": "(à¸‡à¹‘ â€¢Ì€_â€¢Ì)à¸‡",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837505769_428",
      "content": "Ù©(â€¢à¸´Ë“Ì­ â€¢à¸´ )à¸‡",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837506029_391",
      "content": "â•­âˆ©â•®(ã††á´—ã††)â•­âˆ©â•®",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837506242_76",
      "content": "à¸à¹‡Ê•â€¢Í¡á´¥â€¢Ê” à¸à¹‰",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837506440_182",
      "content": "Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837506694_295",
      "content": "Ê•Â·á´¥Â·Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837506932_663",
      "content": "ËË™ËŸË™Ë€",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837507163_803",
      "content": "Ê•ã€€Â·á´¥Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837507364_342",
      "content": "Ê•á´¥Â·ã€€Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837507553_706",
      "content": "Ê•ï¿«á´¥ï¿©Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837507742_708",
      "content": "Ê¢áµ•á´—áµ•Ê¡",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837507952_627",
      "content": "Ê•â—‰á´¥â—‰Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837508211_375",
      "content": "Ê•â€¢ã‰¨â€¢Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837508415_11",
      "content": "Ê•Ê½ÉÊ¼Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837508611_987",
      "content": "Ê•âˆ™áƒ²âˆ™Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837508808_449",
      "content": "Ê•â€¢Ì®Í¡â€¢Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837509018_304",
      "content": "á¶˜ áµ’á´¥áµ’á¶…",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837509204_818",
      "content": "Ê•â€¢Ì Í¡â€¢Ê”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837509400_795",
      "content": "(ã£â—Ï‰â—)ã£",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837509597_467",
      "content": "(â¸â¸â€¢Ì€ÖŠâ€¢Ìâ¸â¸)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837509815_679",
      "content": "(ã£ï¹-) .ï½¡o",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837510028_91",
      "content": "ã…‡ã……ã…‡",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837510229_137",
      "content": "(à¹‘â€¢à¸±à¹‡Ï‰â€¢à¹‡à¸±à¹‘)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837510439_871",
      "content": "( Â´ï½¥ï½¥)ï¾‰(._.`)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837510714_588",
      "content": "â•­âˆ©â•®Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”â•­âˆ©â•®",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837515110_378",
      "content": "(â•¥ï¹â•¥)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837515482_444",
      "content": "(ã€’ï¸¿ã€’)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837515732_143",
      "content": ":;(âˆ©Â´ï¹`âˆ©);:",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837515934_814",
      "content": "( Â´â€¢Ì¥Ì¥Ì¥Ï‰â€¢Ì¥Ì¥Ì¥` )",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837516161_567",
      "content": "â—_â—",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837516413_884",
      "content": "áµ”á´¥áµ”",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837516618_939",
      "content": "( â€¢Ì _ â€¢Ì€)ï¼Ÿ",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837516821_38",
      "content": "Ê•ã£â€¢á´¥â€¢Ê”ã£",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837517029_219",
      "content": "âŠ‚(ãƒ»ï¹ãƒ»âŠ‚)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837517263_36",
      "content": "(ã£â‡€â‘ƒâ†¼)ã£",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837517478_38",
      "content": "â€¢á·„à¡‡â€¢á·…..",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837517687_769",
      "content": "(Â´ï½¥_ï½¥`)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837517920_38",
      "content": "â–¼ãƒ»á´¥ãƒ»â–¼",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837518151_720",
      "content": "âŒ“â€¿âŒ“",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837518441_156",
      "content": "(ã£â‡€â‘ƒâ†¼)ã£",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837518696_397",
      "content": "(à¹‘â€¢Ì â‚ƒ â€¢Ì€à¹‘)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837518949_122",
      "content": "ã¤ï¹âŠ‚",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837519237_0",
      "content": "m( =â€¢Ï‰â€¢= )o.",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837519463_487",
      "content": "ã¥â™¡ã©",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837519676_328",
      "content": "ã£ Ì« âŠ‚",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837519898_366",
      "content": "(ã£`áµ•Â´c)",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837520127_556",
      "content": "ğŸ•¯ï¸",
      "category": "ã¥â™¡ã©"
    },
    {
      "id": "grid_1761837840492_376",
      "content": "æ™šå®‰ ç›å¡å·´å¡",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761837841752_786",
      "content": "æ™šå®‰ ä¾å¤æ¯”å¤",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761837842179_414",
      "content": "æ™šå®‰ å””è¥¿è¿ªè¥¿",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761838126391_227",
      "content": "æ™šå®‰Â æ±¤å§†å¸ƒåˆ©æŸ",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761837842828_647",
      "content": "æ™šå®‰ å°ç‚¹ç‚¹",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761837843123_853",
      "content": "æ™šå®‰ å®å®è½¦",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761838126215_5",
      "content": "æ™šå®‰ é£é£é±¼",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761838295590_638",
      "content": "æ™šå®‰ å“ˆå‘¼å‘¼",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1761838311517_348",
      "content": "æ™šå®‰ å°æœ‹å‹ä»¬",
      "category": "æ™šå®‰"
    },
    {
      "id": "grid_1762859680558_768",
      "content": "ğŸ—“11æœˆ1æ—¥-äº‘é‡å±±æ´ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859691934_789",
      "content": "ğŸ—“11æœˆ3æ—¥-åœ†æ¢¦æ‘ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859692414_810",
      "content": "ğŸ—“11æœˆ5æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859692882_13",
      "content": "ğŸ—“11æœˆ7æ—¥-é›¨æ—å®«æ®¿ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859693455_702",
      "content": "ğŸ—“11æœˆ9æ—¥-æš—èŸ¹æ²™åŸğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859695864_670",
      "content": "ğŸ—“11æœˆ11æ—¥-åœ£å²›ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859696464_565",
      "content": "ğŸ—“11æœˆ13æ—¥-åœ†æ¢¦æ‘ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859696946_551",
      "content": "ğŸ—“11æœˆ15æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859697417_313",
      "content": "ğŸ—“11æœˆ17æ—¥-é›¨æ—é«˜å¤„ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859697985_104",
      "content": "ğŸ—“11æœˆ19æ—¥-æš®åœŸå¢“å›­ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859699123_836",
      "content": "ğŸ—“11æœˆ21æ—¥-æµ®çŸ³é¸Ÿå·¢ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859699694_835",
      "content": "ğŸ—“11æœˆ23æ—¥-éšå£«å±±è°·ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859700587_425",
      "content": "ğŸ—“11æœˆ25æ—¥-æ˜Ÿæ¼ æµ·æ»©ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859701905_75",
      "content": "ğŸ—“11æœˆ27æ—¥-å¤§æ ‘å±‹ğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859703975_386",
      "content": "ğŸ—“11æœˆ29æ—¥-å¤±è½æ–¹èˆŸğŸ—“",
      "category": "çº¢çŸ³"
    },
    {
      "id": "grid_1762859705526_117",
      "content": "ğŸ—“11æœˆ31æ—¥-äº‘é‡å±±æ´ğŸ—“",
      "category": "çº¢çŸ³"
    }
  ],
  "categories": [
    "é»˜è®¤",
    "åˆ†ç±»2",
    "åˆ†ç±»3",
    "åˆ†ç±»4",
    "çº¢çŸ³",
    "æ™šå®‰",
    "ã¥â™¡ã©"
  ]
};

        let activeCategory = 'all';
        let dragSource = null; // å½“å‰æ‹–åŠ¨çš„å…ƒç´ 

        // ç”Ÿæˆå”¯ä¸€ID
        function generateUuid() {
            return 'grid_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
        }

        // åˆå§‹åŒ–ï¼šå®Œå…¨é€šè¿‡JavaScriptæ¸²æŸ“
        function init() {
            renderCategories();
            renderGridsByCategory();
            bindAllEvents();
        }

        // æ¸²æŸ“åˆ†ç±»æ 
        function renderCategories() {
            // ä¿å­˜å½“å‰æ¿€æ´»çš„åˆ†ç±»
            const currentActiveCategory = activeCategory;
            
            // ç§»é™¤æ‰€æœ‰è‡ªå®šä¹‰åˆ†ç±»æŒ‰é’®ï¼ˆä¿ç•™"å…¨éƒ¨"å’Œ"æ·»åŠ æŒ‰é’®"ï¼‰
            const customCategoryBtns = categoryBar.querySelectorAll('.category-btn:not([data-category="all"])');
            customCategoryBtns.forEach(btn => btn.remove());
            
            // é‡æ–°æ·»åŠ æ‰€æœ‰åˆ†ç±»
            appData.categories.forEach(category => {
                const categoryBtn = document.createElement('div');
                categoryBtn.className = 'category-btn';
                categoryBtn.dataset.category = category;
                categoryBtn.textContent = category;
                categoryBtn.draggable = true; // å¯ç”¨æ‹–åŠ¨
                
                // æ¢å¤æ¿€æ´»çŠ¶æ€
                if (category === currentActiveCategory) {
                    categoryBtn.classList.add('active');
                }
                
                categoryBar.insertBefore(categoryBtn, addCategoryBtn);
            });
            
            // ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ¿€æ´»çŠ¶æ€
            const activeBtn = categoryBar.querySelector('.category-btn.active');
            if (!activeBtn) {
                categoryBar.querySelector('.category-btn[data-category="all"]').classList.add('active');
                activeCategory = 'all';
            }
        }

        // æŒ‰åˆ†ç±»æ¸²æŸ“æ ¼å­
        function renderGridsByCategory() {
            gridContainer.innerHTML = '';
            const filteredGrids = activeCategory === 'all' 
                ? appData.grids 
                : appData.grids.filter(grid => grid.category === activeCategory);

            filteredGrids.forEach(grid => {
                const gridElem = document.createElement('div');
                gridElem.className = 'grid-item';
                gridElem.contentEditable = 'false';
                gridElem.textContent = grid.content;
                gridElem.dataset.gridId = grid.id;
                gridElem.dataset.gridCategory = grid.category;
                gridElem.draggable = true; // å¯ç”¨æ‹–åŠ¨
                gridContainer.appendChild(gridElem);
            });
        }

        // ç»‘å®šæ‰€æœ‰äº‹ä»¶
        function bindAllEvents() {
            bindCategoryEvents();
            bindGridClickCopy();
            bindGridRightClickEdit();
            bindGridEditEnd();
            bindAddGrid();
            bindSaveFile();
            bindDragEvents(); // ç»‘å®šæ‹–åŠ¨äº‹ä»¶
        }

        // ç»‘å®šæ‹–åŠ¨äº‹ä»¶
        function bindDragEvents() {
            // åˆ†ç±»æ‹–åŠ¨äº‹ä»¶
            bindCategoryDragEvents();
            // æ ¼å­æ‹–åŠ¨äº‹ä»¶
            bindGridDragEvents();
        }

        // åˆ†ç±»æ‹–åŠ¨äº‹ä»¶
        function bindCategoryDragEvents() {
            // æ‹–åŠ¨å¼€å§‹
            categoryBar.addEventListener('dragstart', (e) => {
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn || categoryBtn.dataset.category === 'all') {
                    e.preventDefault();
                    return;
                }
                
                dragSource = categoryBtn;
                categoryBtn.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', categoryBtn.dataset.category);
            });

            // æ‹–åŠ¨ç»è¿‡
            categoryBar.addEventListener('dragover', (e) => {
                e.preventDefault();
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn || categoryBtn === dragSource || categoryBtn.dataset.category === 'all') {
                    return;
                }
                
                categoryBtn.classList.add('drag-over');
                e.dataTransfer.dropEffect = 'move';
            });

            // æ‹–åŠ¨ç¦»å¼€
            categoryBar.addEventListener('dragleave', (e) => {
                const categoryBtn = e.target.closest('.category-btn');
                if (categoryBtn) {
                    categoryBtn.classList.remove('drag-over');
                }
            });

            // æ”¾ç½®
            categoryBar.addEventListener('drop', (e) => {
                e.preventDefault();
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn || !dragSource || categoryBtn === dragSource || categoryBtn.dataset.category === 'all') {
                    return;
                }
                
                // ç§»é™¤æ‹–åŠ¨æ ·å¼
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('drag-over');
                });
                
                // äº¤æ¢åˆ†ç±»é¡ºåº
                swapCategories(dragSource.dataset.category, categoryBtn.dataset.category);
                
                // é‡æ–°æ¸²æŸ“åˆ†ç±»
                renderCategories();
            });

            // æ‹–åŠ¨ç»“æŸ
            categoryBar.addEventListener('dragend', (e) => {
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('dragging', 'drag-over');
                });
                dragSource = null;
            });
        }

        // æ ¼å­æ‹–åŠ¨äº‹ä»¶
        function bindGridDragEvents() {
            // æ‹–åŠ¨å¼€å§‹
            gridContainer.addEventListener('dragstart', (e) => {
                const gridItem = e.target.closest('.grid-item');
                if (!gridItem) {
                    e.preventDefault();
                    return;
                }
                
                dragSource = gridItem;
                gridItem.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', gridItem.dataset.gridId);
            });

            // æ‹–åŠ¨ç»è¿‡
            gridContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                const gridItem = e.target.closest('.grid-item');
                if (!gridItem || gridItem === dragSource) {
                    return;
                }
                
                gridItem.classList.add('drag-over');
                e.dataTransfer.dropEffect = 'move';
            });

            // æ‹–åŠ¨ç¦»å¼€
            gridContainer.addEventListener('dragleave', (e) => {
                const gridItem = e.target.closest('.grid-item');
                if (gridItem) {
                    gridItem.classList.remove('drag-over');
                }
            });

            // æ”¾ç½®
            gridContainer.addEventListener('drop', (e) => {
                e.preventDefault();
                const gridItem = e.target.closest('.grid-item');
                if (!gridItem || !dragSource || gridItem === dragSource) {
                    return;
                }
                
                // ç§»é™¤æ‹–åŠ¨æ ·å¼
                document.querySelectorAll('.grid-item').forEach(item => {
                    item.classList.remove('drag-over');
                });
                
                // äº¤æ¢æ ¼å­é¡ºåº
                swapGrids(dragSource.dataset.gridId, gridItem.dataset.gridId);
                
                // é‡æ–°æ¸²æŸ“æ ¼å­
                renderGridsByCategory();
            });

            // æ‹–åŠ¨ç»“æŸ
            gridContainer.addEventListener('dragend', (e) => {
                document.querySelectorAll('.grid-item').forEach(item => {
                    item.classList.remove('dragging', 'drag-over');
                });
                dragSource = null;
            });
        }

        // äº¤æ¢åˆ†ç±»é¡ºåº
        function swapCategories(category1, category2) {
            const index1 = appData.categories.indexOf(category1);
            const index2 = appData.categories.indexOf(category2);
            
            if (index1 !== -1 && index2 !== -1) {
                // äº¤æ¢æ•°ç»„ä¸­çš„ä½ç½®
                [appData.categories[index1], appData.categories[index2]] = 
                [appData.categories[index2], appData.categories[index1]];
            }
        }

        // äº¤æ¢æ ¼å­é¡ºåº
        function swapGrids(gridId1, gridId2) {
            const index1 = appData.grids.findIndex(grid => grid.id === gridId1);
            const index2 = appData.grids.findIndex(grid => grid.id === gridId2);
            
            if (index1 !== -1 && index2 !== -1) {
                // äº¤æ¢æ•°ç»„ä¸­çš„ä½ç½®
                [appData.grids[index1], appData.grids[index2]] = 
                [appData.grids[index2], appData.grids[index1]];
            }
        }

        // åˆ†ç±»åˆ‡æ¢+æ–°å¢ + å³é”®ç¼–è¾‘
        function bindCategoryEvents() {
            // åˆ†ç±»åˆ‡æ¢
            categoryBar.addEventListener('click', (e) => {
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn || categoryBtn.classList.contains('editing') || categoryBtn.classList.contains('dragging')) return;
                
                // æ›´æ–°æ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                categoryBtn.classList.add('active');
                
                activeCategory = categoryBtn.dataset.category;
                renderGridsByCategory();
            });

            // æ–°å¢åˆ†ç±»
            addCategoryBtn.addEventListener('click', () => {
                const newCategory = `åˆ†ç±»${appData.categories.length + 1}`;
                appData.categories.push(newCategory);
                
                // ç›´æ¥åˆ›å»ºæ–°çš„åˆ†ç±»æŒ‰é’®
                const categoryBtn = document.createElement('div');
                categoryBtn.className = 'category-btn';
                categoryBtn.dataset.category = newCategory;
                categoryBtn.textContent = newCategory;
                categoryBtn.draggable = true;
                
                categoryBar.insertBefore(categoryBtn, addCategoryBtn);
            });

            // åˆ†ç±»å³é”®èœå•
            categoryBar.addEventListener('contextmenu', (e) => {
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn || categoryBtn.dataset.category === 'all') {
                    e.preventDefault();
                    return;
                }
                
                e.preventDefault();
                showCategoryContextMenu(e.clientX, e.clientY, categoryBtn);
            });

            // ç‚¹å‡»å…¶ä»–åœ°æ–¹éšè—å³é”®èœå•
            document.addEventListener('click', () => {
                hideContextMenu();
            });
        }

        // æ˜¾ç¤ºåˆ†ç±»å³é”®èœå•
        function showCategoryContextMenu(x, y, categoryBtn) {
            // ç§»é™¤ç°æœ‰çš„å³é”®èœå•
            hideContextMenu();
            
            const contextMenu = document.createElement('div');
            contextMenu.className = 'context-menu';
            contextMenu.style.left = x + 'px';
            contextMenu.style.top = y + 'px';
            
            // ç¼–è¾‘é€‰é¡¹
            const editItem = document.createElement('div');
            editItem.className = 'context-menu-item';
            editItem.textContent = 'ç¼–è¾‘åç§°';
            editItem.onclick = () => startCategoryEdit(categoryBtn);
            
            // åˆ é™¤é€‰é¡¹
            const deleteItem = document.createElement('div');
            deleteItem.className = 'context-menu-item delete';
            deleteItem.textContent = 'åˆ é™¤åˆ†ç±»';
            deleteItem.onclick = () => deleteCategory(categoryBtn);
            
            contextMenu.appendChild(editItem);
            contextMenu.appendChild(deleteItem);
            
            document.body.appendChild(contextMenu);
        }

        // éšè—å³é”®èœå•
        function hideContextMenu() {
            const existingMenu = document.querySelector('.context-menu');
            if (existingMenu) {
                existingMenu.remove();
            }
        }

        // å¼€å§‹ç¼–è¾‘åˆ†ç±»åç§°
        function startCategoryEdit(categoryBtn) {
            const oldCategory = categoryBtn.dataset.category;
            const currentText = categoryBtn.textContent;
            
            // è®¾ç½®ç¼–è¾‘çŠ¶æ€
            categoryBtn.classList.add('editing');
            
            // åˆ›å»ºè¾“å…¥æ¡†
            const input = document.createElement('input');
            input.className = 'category-input';
            input.type = 'text';
            input.value = currentText;
            input.maxLength = 20;
            
            // æ¸…ç©ºæŒ‰é’®å†…å®¹å¹¶æ·»åŠ è¾“å…¥æ¡†
            categoryBtn.innerHTML = '';
            categoryBtn.appendChild(input);
            input.focus();
            input.select();
            
            // ä¿å­˜ç¼–è¾‘
            const saveEdit = () => {
                const newName = input.value.trim();
                
                // æ¸…é™¤ç¼–è¾‘çŠ¶æ€
                categoryBtn.classList.remove('editing');
                
                if (newName && newName !== oldCategory) {
                    // æ›´æ–°åˆ†ç±»åç§°
                    updateCategoryName(oldCategory, newName);
                    renderCategories();
                } else {
                    renderCategories();
                }
                
                renderGridsByCategory();
            };
            
            // å›è½¦ä¿å­˜
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    saveEdit();
                } else if (e.key === 'Escape') {
                    categoryBtn.classList.remove('editing');
                    renderCategories();
                    renderGridsByCategory();
                }
            });
            
            // å¤±å»ç„¦ç‚¹ä¿å­˜
            input.addEventListener('blur', () => {
                setTimeout(saveEdit, 100);
            });
            
            hideContextMenu();
        }

        // æ›´æ–°åˆ†ç±»åç§°
        function updateCategoryName(oldName, newName) {
            // æ›´æ–°åˆ†ç±»åˆ—è¡¨
            const categoryIndex = appData.categories.indexOf(oldName);
            if (categoryIndex !== -1) {
                appData.categories[categoryIndex] = newName;
            }
            
            // æ›´æ–°æ‰€æœ‰ä½¿ç”¨è¯¥åˆ†ç±»çš„æ ¼å­
            appData.grids.forEach(grid => {
                if (grid.category === oldName) {
                    grid.category = newName;
                }
            });
            
            // å¦‚æœå½“å‰æ¿€æ´»çš„åˆ†ç±»è¢«ä¿®æ”¹ï¼Œæ›´æ–°æ¿€æ´»çŠ¶æ€
            if (activeCategory === oldName) {
                activeCategory = newName;
            }
        }

        // åˆ é™¤åˆ†ç±»
        function deleteCategory(categoryBtn) {
            const categoryToDelete = categoryBtn.dataset.category;
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤åˆ†ç±»"${categoryToDelete}"å—ï¼Ÿæ­¤æ“ä½œä¼šå°†å±äºè¯¥åˆ†ç±»çš„æ ¼å­ç§»åŠ¨åˆ°"é»˜è®¤"åˆ†ç±»ã€‚`)) {
                // å°†æ‰€æœ‰å±äºè¯¥åˆ†ç±»çš„æ ¼å­ç§»åŠ¨åˆ°é»˜è®¤åˆ†ç±»
                appData.grids.forEach(grid => {
                    if (grid.category === categoryToDelete) {
                        grid.category = 'é»˜è®¤';
                    }
                });
                
                // ä»åˆ†ç±»åˆ—è¡¨ä¸­ç§»é™¤
                appData.categories = appData.categories.filter(cat => cat !== categoryToDelete);
                
                // å¦‚æœåˆ é™¤çš„æ˜¯å½“å‰æ¿€æ´»çš„åˆ†ç±»ï¼Œåˆ‡æ¢åˆ°å…¨éƒ¨
                if (activeCategory === categoryToDelete) {
                    activeCategory = 'all';
                }
                
                // é‡æ–°æ¸²æŸ“
                renderCategories();
                renderGridsByCategory();
            }
            
            hideContextMenu();
        }

        // æ ¼å­å•å‡»å¤åˆ¶
        function bindGridClickCopy() {
            gridContainer.addEventListener('click', async (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem || gridElem.classList.contains('dragging')) return;
                const text = gridElem.textContent.trim();
                if (text) {
                    await navigator.clipboard.writeText(text);
                    showToast(copyToast);
                }
            });
        }

        // æ ¼å­å³é”®ç¼–è¾‘
        function bindGridRightClickEdit() {
            gridContainer.addEventListener('contextmenu', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem) return;
                e.preventDefault();
                gridElem.contentEditable = 'true';
                gridElem.focus();
                const range = document.createRange();
                range.selectNodeContents(gridElem);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
            });
        }

        // æ ¼å­ç¼–è¾‘ç»“æŸ
        function bindGridEditEnd() {
            gridContainer.addEventListener('blur', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem || gridElem.contentEditable !== 'true') return;

                const newContent = gridElem.textContent.trim();
                const gridId = gridElem.dataset.gridId;

                const gridIndex = appData.grids.findIndex(grid => grid.id === gridId);
                if (gridIndex === -1) return;

                if (!newContent) {
                    appData.grids.splice(gridIndex, 1);
                } else {
                    appData.grids[gridIndex].content = newContent;
                }

                gridElem.contentEditable = 'false';
                renderGridsByCategory();
            }, true);

            gridContainer.addEventListener('keydown', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (e.key === 'Enter' && !e.shiftKey && gridElem?.contentEditable === 'true') {
                    e.preventDefault();
                    gridElem.blur();
                }
            });
        }

        // æ–°å¢æ ¼å­
        function bindAddGrid() {
            addGridBtn.addEventListener('click', () => {
                const newCategory = activeCategory === 'all' ? 'é»˜è®¤' : activeCategory;
                const newGrid = {
                    id: generateUuid(),
                    content: `æ–°æ–‡æœ¬${appData.grids.length + 1}`,
                    category: newCategory
                };
                appData.grids.push(newGrid);
                renderGridsByCategory();
            });
        }

        // ä¿®å¤ä¿å­˜åŠŸèƒ½ - ä½¿ç”¨ç®€å•å¯é çš„æ–¹æ³•
        function bindSaveFile() {
            saveFileBtn.addEventListener('click', () => {
                try {
                    // è·å–å½“å‰HTMLç»“æ„
                    let htmlCode = document.documentElement.outerHTML;
                    
                    // ä½¿ç”¨ç²¾ç¡®çš„æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢appData
                    const appDataStr = JSON.stringify(appData, null, 2);
                    const regex = /let appData\s*=\s*\{[\s\S]*?\};/;
                    
                    if (regex.test(htmlCode)) {
                        htmlCode = htmlCode.replace(regex, `let appData = ${appDataStr};`);
                        
                        // åˆ›å»ºå¹¶ä¸‹è½½æ–‡ä»¶
                        const blob = new Blob([htmlCode], { type: 'text/html' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'åä¸‰-å¿«æ·å›å¤.html';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        showToast(saveToast);
                    } else {
                        // å¦‚æœæ­£åˆ™åŒ¹é…å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•
                        alert('ä¿å­˜å¤±è´¥ï¼šæ•°æ®æ ¼å¼é”™è¯¯ï¼Œè¯·é‡è¯•');
                    }
                } catch (error) {
                    console.error('ä¿å­˜å¤±è´¥:', error);
                    alert('ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            });
        }

        // æç¤ºæ¡†æ˜¾ç¤º
        function showToast(toastElem) {
            toastElem.classList.add('show');
            setTimeout(() => toastElem.classList.remove('show'), 1500);
        }

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>

<div id="eagle-drag-images" style="position: fixed; top: -100000px;"></div><doubao-ai-csui id="e46238343e3c4170a9c7098a72f83bf2" data-host-id="154824b8-70d7-4392-9332-d21143df134f"></doubao-ai-csui><div id="doubao-ai-translate-image-assistant154824b8-70d7-4392-9332-d21143df134f" data-collection-img-host-id="154824b8-70d7-4392-9332-d21143df134f"></div><div style="width: 0px; height: 0px; position: absolute; z-index: 200000;"></div><div id="doubao-ai-assistant" aria-label="flow-ai-assistant" class="flow-ai-select-bar-enabled flow-ai-select-bar-support-iframe" aria-description="flow-ai-select-bar-enabled flow-ai-select-bar-support-iframe" style="width: 0px; height: 0px; position: absolute; top: 0px; left: 0px; overflow: hidden;"></div></body></html>