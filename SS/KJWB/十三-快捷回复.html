<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åä¸‰ | å¿«æ·å›å¤</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background-color: #121212; color: #e0e0e0; padding: 20px; min-height: 100vh; position: relative; }
        .title { text-align: center; margin-bottom: 15px; font-size: 24px; color: #fff; }
        
        .category-bar { max-width: 1200px; margin: 0 auto 20px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .category-btn { padding: 6px 14px; background-color: #1e1e1e; border: 1px solid #333; border-radius: 4px; cursor: pointer; transition: background 0.2s; }
        .category-btn.active { background-color: #2196F3; color: #fff; border-color: #2196F3; }
        .add-category-btn { padding: 6px 14px; background-color: #333; border: 1px solid #444; border-radius: 4px; cursor: pointer; transition: background 0.2s; }
        .add-category-btn:hover { background-color: #444; }
        
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; max-width: 1200px; margin: 0 auto; padding-bottom: 80px; }
        .grid-item { background-color: #1e1e1e; border: 1px solid #333; border-radius: 4px; padding: 15px 10px; text-align: center; cursor: pointer; transition: all 0.2s; min-height: 60px; display: flex; align-items: center; justify-content: center; word-break: break-all; }
        .grid-item:hover { background-color: #2d2d2d; border-color: #555; }
        
        .btn-group { position: fixed; bottom: 30px; right: 30px; display: flex; gap: 12px; }
        .func-btn { width: 50px; height: 50px; border-radius: 50%; border: none; color: #fff; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .add-grid-btn { background-color: #2196F3; }
        .add-grid-btn:hover { background-color: #1976D2; }
        .save-file-btn { background-color: #4CAF50; }
        .save-file-btn:hover { background-color: #388E3C; }
        
        .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 8px 16px; border-radius: 4px; font-size: 14px; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .copy-toast { background-color: #32cd32; color: #fff; }
        .save-toast { background-color: #ff9800; color: #fff; }
        .toast.show { opacity: 1; }
        
        .grid-item::-webkit-context-menu { display: none; }
    </style>
</head>
<body>
    <h1 class="title">å¿«æ·å›å¤</h1>
    
    <div class="category-bar" id="categoryBar">
        <div class="category-btn" data-category="all">å…¨éƒ¨</div>
        
        <div class="category-btn" data-category="é»˜è®¤">é»˜è®¤</div><div class="category-btn" data-category="1">1</div><div class="category-btn" data-category="2">2</div><div class="category-btn" data-category="3">3</div><div class="category-btn" data-category="4">4</div><div class="category-btn" data-category="5">5</div><div class="category-btn" data-category="6">6</div><div class="category-btn" data-category="7">7</div><div class="category-btn" data-category="8">8</div><div class="category-btn" data-category="9">9</div><div class="category-btn active" data-category="10">10</div><button class="add-category-btn" id="addCategoryBtn">+</button>
    </div>
    
    <div class="grid-container" id="gridContainer"><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199121760_794" data-grid-category="10">å—¨å—¨</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199655133_339" data-grid-category="10">æ—©</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199748862_153" data-grid-category="10">(à¸‡à¹‘ â€¢Ì€_â€¢Ì)à¸‡</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199794598_634" data-grid-category="10">(ã£â—Ï‰â—)ã£</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199843852_515" data-grid-category="10">(â—â°à±ªâ°â—)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199861972_360" data-grid-category="10">Ù©(â€¢à¸´Ë“Ì­ â€¢à¸´ )à¸‡</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199874218_121" data-grid-category="10">(â°â–¿â°)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199930575_651" data-grid-category="10">(ã††á´—ã††)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199956409_255" data-grid-category="10">à¸à¹‡Ê•â€¢Í¡á´¥â€¢Ê” à¸à¹‰</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756199972342_212" data-grid-category="10">Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756200077456_505" data-grid-category="10">(â¸â¸â€¢Ì€ÖŠâ€¢Ìâ¸â¸)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756200106058_222" data-grid-category="10">(ã£ï¹-) .ï½¡o</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756200204160_766" data-grid-category="10">ã…‡ã……ã…‡</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756200278679_900" data-grid-category="10">Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756201187423_65" data-grid-category="10">(à¹‘â€¢à¸±à¹‡Ï‰â€¢à¹‡à¸±à¹‘)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756201302549_434" data-grid-category="10">( Â´ï½¥ï½¥)ï¾‰(._.`)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756201315211_497" data-grid-category="10">â•­âˆ©â•®Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”â•­âˆ©â•®</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756201500467_973" data-grid-category="10">â•­âˆ©â•®(ã††á´—ã††)â•­âˆ©â•®</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756206386144_968" data-grid-category="10">(â•¥ï¹â•¥)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756206389637_534" data-grid-category="10">(ã€’ï¸¿ã€’)</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756206389779_797" data-grid-category="10">:;(âˆ©Â´ï¹`âˆ©);:</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756206417349_12" data-grid-category="10">( Â´â€¢Ì¥Ì¥Ì¥Ï‰â€¢Ì¥Ì¥Ì¥` )</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756206705432_259" data-grid-category="10">( Ë˜â€¢Ï‰â€¢Ë˜ )</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756208832101_266" data-grid-category="10">â€¢á·„à¡‡â€¢á·…..</div><div class="grid-item" contenteditable="false" data-grid-id="grid_1756210351136_587" data-grid-category="10">( â€¢Ì _ â€¢Ì€)ï¼Ÿ</div></div>
    
    <div class="btn-group">
        <button class="func-btn add-grid-btn" id="addGridBtn">+</button>
        <button class="func-btn save-file-btn" id="saveFileBtn">ğŸ’¾</button>
    </div>
    
    <div class="toast copy-toast" id="copyToast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
    <div class="toast save-toast" id="saveToast">æ–‡ä»¶å·²å¼€å§‹ä¸‹è½½</div>

    <script>
        // DOMå…ƒç´ 
        const categoryBar = document.getElementById('categoryBar');
        const gridContainer = document.getElementById('gridContainer');
        const addCategoryBtn = document.getElementById('addCategoryBtn');
        const addGridBtn = document.getElementById('addGridBtn');
        const saveFileBtn = document.getElementById('saveFileBtn');
        const copyToast = document.getElementById('copyToast');
        const saveToast = document.getElementById('saveToast');

        // æ ¸å¿ƒæ•°æ®ï¼šåŒæ—¶å­˜å‚¨ã€Œæ ¼å­æ•°æ®ã€å’Œã€Œåˆ†ç±»åˆ—è¡¨ã€ï¼Œç¡®ä¿ä¿å­˜æ—¶ä¸¤è€…éƒ½èƒ½åµŒå…¥HTML
        let appData = {
  "grids": [
    {
      "id": "grid_1756199071990_48",
      "content": "1",
      "category": "1"
    },
    {
      "id": "grid_1756199076267_19",
      "content": "2",
      "category": "2"
    },
    {
      "id": "grid_1756199083252_615",
      "content": "3",
      "category": "3"
    },
    {
      "id": "grid_1756199087058_949",
      "content": "4",
      "category": "4"
    },
    {
      "id": "grid_1756199090694_808",
      "content": "5",
      "category": "5"
    },
    {
      "id": "grid_1756199094721_670",
      "content": "6",
      "category": "6"
    },
    {
      "id": "grid_1756199100689_889",
      "content": "7",
      "category": "7"
    },
    {
      "id": "grid_1756199105066_670",
      "content": "8",
      "category": "8"
    },
    {
      "id": "grid_1756199117198_776",
      "content": "9",
      "category": "9"
    },
    {
      "id": "grid_1756199121760_794",
      "content": "å—¨å—¨",
      "category": "10"
    },
    {
      "id": "grid_1756199127103_330",
      "content": "0",
      "category": "é»˜è®¤"
    },
    {
      "id": "grid_1756199655133_339",
      "content": "æ—©",
      "category": "10"
    },
    {
      "id": "grid_1756199748862_153",
      "content": "(à¸‡à¹‘ â€¢Ì€_â€¢Ì)à¸‡",
      "category": "10"
    },
    {
      "id": "grid_1756199794598_634",
      "content": "(ã£â—Ï‰â—)ã£",
      "category": "10"
    },
    {
      "id": "grid_1756199843852_515",
      "content": "(â—â°à±ªâ°â—)",
      "category": "10"
    },
    {
      "id": "grid_1756199861972_360",
      "content": "Ù©(â€¢à¸´Ë“Ì­ â€¢à¸´ )à¸‡",
      "category": "10"
    },
    {
      "id": "grid_1756199874218_121",
      "content": "(â°â–¿â°)",
      "category": "10"
    },
    {
      "id": "grid_1756199930575_651",
      "content": "(ã††á´—ã††)",
      "category": "10"
    },
    {
      "id": "grid_1756199956409_255",
      "content": "à¸à¹‡Ê•â€¢Í¡á´¥â€¢Ê” à¸à¹‰",
      "category": "10"
    },
    {
      "id": "grid_1756199972342_212",
      "content": "Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”",
      "category": "10"
    },
    {
      "id": "grid_1756200077456_505",
      "content": "(â¸â¸â€¢Ì€ÖŠâ€¢Ìâ¸â¸)",
      "category": "10"
    },
    {
      "id": "grid_1756200106058_222",
      "content": "(ã£ï¹-) .ï½¡o",
      "category": "10"
    },
    {
      "id": "grid_1756200204160_766",
      "content": "ã…‡ã……ã…‡",
      "category": "10"
    },
    {
      "id": "grid_1756200278679_900",
      "content": "Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”",
      "category": "10"
    },
    {
      "id": "grid_1756201187423_65",
      "content": "(à¹‘â€¢à¸±à¹‡Ï‰â€¢à¹‡à¸±à¹‘)",
      "category": "10"
    },
    {
      "id": "grid_1756201302549_434",
      "content": "( Â´ï½¥ï½¥)ï¾‰(._.`)",
      "category": "10"
    },
    {
      "id": "grid_1756201315211_497",
      "content": "â•­âˆ©â•®Ê•Â´â€¢ á´¥â€¢Ì¥`Ê”â•­âˆ©â•®",
      "category": "10"
    },
    {
      "id": "grid_1756201500467_973",
      "content": "â•­âˆ©â•®(ã††á´—ã††)â•­âˆ©â•®",
      "category": "10"
    },
    {
      "id": "grid_1756206386144_968",
      "content": "(â•¥ï¹â•¥)",
      "category": "10"
    },
    {
      "id": "grid_1756206389637_534",
      "content": "(ã€’ï¸¿ã€’)",
      "category": "10"
    },
    {
      "id": "grid_1756206389779_797",
      "content": ":;(âˆ©Â´ï¹`âˆ©);:",
      "category": "10"
    },
    {
      "id": "grid_1756206417349_12",
      "content": "( Â´â€¢Ì¥Ì¥Ì¥Ï‰â€¢Ì¥Ì¥Ì¥` )",
      "category": "10"
    },
    {
      "id": "grid_1756206705432_259",
      "content": "( Ë˜â€¢Ï‰â€¢Ë˜ )",
      "category": "10"
    },
    {
      "id": "grid_1756208832101_266",
      "content": "â€¢á·„à¡‡â€¢á·…..",
      "category": "10"
    },
    {
      "id": "grid_1756210351136_587",
      "content": "( â€¢Ì _ â€¢Ì€)ï¼Ÿ",
      "category": "10"
    }
  ],
  "categories": [
    "é»˜è®¤",
    "1",
    "2",
    "3",
    "4",
    "5",
    "6",
    "7",
    "8",
    "9",
    "10"
  ]
};
        let activeCategory = 'all'; // å½“å‰æ¿€æ´»åˆ†ç±»

        // ç”Ÿæˆå”¯ä¸€ID
        function generateUuid() {
            return 'grid_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
        }

        // åˆå§‹åŒ–ï¼šåŠ è½½æ•°æ®å¹¶æ¸²æŸ“
        function init() {
            renderCategories(); // å…ˆæ¸²æŸ“åˆ†ç±»ï¼ˆç¡®ä¿åˆ†ç±»åˆ—è¡¨ä¸æ•°æ®åŒæ­¥ï¼‰
            renderGridsByCategory(); // å†æ¸²æŸ“æ ¼å­
            bindAllEvents();
        }

        // 1. æ¸²æŸ“åˆ†ç±»æ ï¼ˆå…³é”®ï¼šä»appData.categoriesåŠ è½½ï¼Œç¡®ä¿æ–°å¢åˆ†ç±»èƒ½ä¿å­˜ï¼‰
        function renderCategories() {
            // æ¸…ç©ºç°æœ‰åˆ†ç±»æŒ‰é’®ï¼ˆé™¤äº†"å…¨éƒ¨"å’Œ"æ–°å¢åˆ†ç±»"æŒ‰é’®ï¼‰
            const existingCategoryBtns = categoryBar.querySelectorAll('.category-btn:not([data-category="all"])');
            existingCategoryBtns.forEach(btn => btn.remove());

            // ä»appData.categoriesæ¸²æŸ“æ‰€æœ‰åˆ†ç±»æŒ‰é’®
            appData.categories.forEach(category => {
                const categoryBtn = document.createElement('div');
                categoryBtn.className = 'category-btn';
                categoryBtn.dataset.category = category;
                categoryBtn.textContent = category;
                // æ’å…¥åˆ°"æ–°å¢åˆ†ç±»"æŒ‰é’®å‰
                categoryBar.insertBefore(categoryBtn, addCategoryBtn);
            });

            // æ¢å¤"å…¨éƒ¨"æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€ï¼ˆåˆå§‹åŒ–æ—¶é»˜è®¤æ¿€æ´»ï¼‰
            document.querySelector('.category-btn[data-category="all"]').classList.add('active');
        }

        // 2. æŒ‰åˆ†ç±»æ¸²æŸ“æ ¼å­ï¼ˆä»appData.gridsåŠ è½½ï¼Œç¡®ä¿æ•°æ®åŒæ­¥ï¼‰
        function renderGridsByCategory() {
            gridContainer.innerHTML = '';
            const filteredGrids = activeCategory === 'all' 
                ? appData.grids 
                : appData.grids.filter(grid => grid.category === activeCategory);

            filteredGrids.forEach(grid => {
                const gridElem = document.createElement('div');
                gridElem.className = 'grid-item';
                gridElem.contentEditable = 'false';
                gridElem.textContent = grid.content;
                gridElem.dataset.gridId = grid.id;
                gridElem.dataset.gridCategory = grid.category;
                gridContainer.appendChild(gridElem);
            });
        }

        // 3. ç»‘å®šæ‰€æœ‰äº‹ä»¶
        function bindAllEvents() {
            bindCategoryEvents();
            bindGridClickCopy();
            bindGridRightClickEdit();
            bindGridEditEnd();
            bindAddGrid();
            bindSaveFile();
        }

        // åˆ†ç±»åˆ‡æ¢+æ–°å¢ï¼ˆæ“ä½œåŒæ­¥åˆ°appData.categoriesï¼‰
        function bindCategoryEvents() {
            // åˆ‡æ¢åˆ†ç±»
            categoryBar.addEventListener('click', (e) => {
                const categoryBtn = e.target.closest('.category-btn');
                if (!categoryBtn) return;
                document.querySelector('.category-btn.active').classList.remove('active');
                categoryBtn.classList.add('active');
                activeCategory = categoryBtn.dataset.category;
                renderGridsByCategory();
            });

            // æ–°å¢åˆ†ç±»ï¼ˆå…³é”®ï¼šæ–°å¢ååŒæ­¥åˆ°appData.categoriesï¼Œç¡®ä¿ä¿å­˜æ—¶èƒ½åŒ…å«ï¼‰
            addCategoryBtn.addEventListener('click', () => {
                const newCategory = `åˆ†ç±»${appData.categories.length + 1}`;
                // åŒæ­¥åˆ°æ•°æ®ä¸­
                appData.categories.push(newCategory);
                // é‡æ–°æ¸²æŸ“åˆ†ç±»æ 
                renderCategories();
            });
        }

        // æ ¼å­å•å‡»å¤åˆ¶
        function bindGridClickCopy() {
            gridContainer.addEventListener('click', async (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem) return;
                const text = gridElem.textContent.trim();
                if (text) {
                    await navigator.clipboard.writeText(text);
                    showToast(copyToast);
                }
            });
        }

        // æ ¼å­å³é”®ç¼–è¾‘
        function bindGridRightClickEdit() {
            gridContainer.addEventListener('contextmenu', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem) return;
                e.preventDefault();
                gridElem.contentEditable = 'true';
                gridElem.focus();
                const range = document.createRange();
                range.selectNodeContents(gridElem);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
            });
        }

        // æ ¼å­ç¼–è¾‘ç»“æŸï¼ˆåŒæ­¥åˆ°appData.gridsï¼‰
        function bindGridEditEnd() {
            gridContainer.addEventListener('blur', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (!gridElem || gridElem.contentEditable !== 'true') return;

                const newContent = gridElem.textContent.trim();
                const gridId = gridElem.dataset.gridId;
                const gridCategory = gridElem.dataset.gridCategory;

                const gridIndex = appData.grids.findIndex(grid => grid.id === gridId);
                if (gridIndex === -1) return;

                if (!newContent) {
                    appData.grids.splice(gridIndex, 1);
                } else {
                    appData.grids[gridIndex] = { ...appData.grids[gridIndex], content: newContent };
                }

                gridElem.contentEditable = 'false';
                renderGridsByCategory();
            }, true);

            gridContainer.addEventListener('keydown', (e) => {
                const gridElem = e.target.closest('.grid-item');
                if (e.key === 'Enter' && !e.shiftKey && gridElem?.contentEditable === 'true') {
                    e.preventDefault();
                    gridElem.blur();
                }
            });
        }

        // æ–°å¢æ ¼å­ï¼ˆåŒæ­¥åˆ°appData.gridsï¼‰
        function bindAddGrid() {
            addGridBtn.addEventListener('click', () => {
                const newCategory = activeCategory === 'all' ? 'é»˜è®¤' : activeCategory;
                const newGrid = {
                    id: generateUuid(),
                    content: `æ–°æ–‡æœ¬${appData.grids.length + 1}`,
                    category: newCategory
                };
                // åŒæ­¥åˆ°æ•°æ®ä¸­
                appData.grids.push(newGrid);
                renderGridsByCategory();
            });
        }

        // å…³é”®ä¿®å¤ï¼šä¿å­˜æ—¶ç¡®ä¿appDataå®Œæ•´åµŒå…¥HTMLï¼Œé¿å…æ•°æ®ä¸¢å¤±
        function bindSaveFile() {
            saveFileBtn.addEventListener('click', () => {
                // 1. è·å–å½“å‰HTMLä»£ç 
                let htmlCode = document.documentElement.outerHTML;

                // 2. æ‰¾åˆ°scriptæ ‡ç­¾ä¸­appDataçš„ä½ç½®ï¼Œæ›¿æ¢ä¸ºæœ€æ–°æ•°æ®ï¼ˆæ ¸å¿ƒï¼šç¡®ä¿ä¿å­˜çš„æ˜¯å®æ—¶æ•°æ®ï¼‰
                const appDataStr = JSON.stringify(appData, null, 2);
                // åŒ¹é…scriptä¸­"let appData = "å¼€å¤´çš„è¡Œï¼Œæ›¿æ¢ä¸ºæœ€æ–°æ•°æ®
                htmlCode = htmlCode.replace(
                    /let appData = [\s\S]*?;/, 
                    `let appData = ${appDataStr};`
                );

                // 3. ç”ŸæˆBlobæ–‡ä»¶å¹¶ä¸‹è½½
                const blob = new Blob([htmlCode], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'åä¸‰-å¿«æ·å›å¤.html';
                a.click();
                URL.revokeObjectURL(url);
                showToast(saveToast);
            });
        }

        // æç¤ºæ¡†æ˜¾ç¤º
        function showToast(toastElem) {
            toastElem.classList.add('show');
            setTimeout(() => toastElem.classList.remove('show'), 1500);
        }

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>

</body></html>